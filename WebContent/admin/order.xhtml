<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">

	<ui:composition>
		<p:panel closable="true" header="#{vasessionbean.programName}">
		<p:ajax event="close" listener="#{menubean.handleClose}" update=":mainCenterForm" />
		<p:panelGrid>
			<p:row>
				<p:column>
					<p:panelGrid>
						<p:row>
							<p:column>
								<h:outputText value="Plant name :" />
							</p:column>
							<p:column>
								<p:inputText id="plantName" readonly="true" value="#{orderbean.selectedMasterOverlay.company}"/>
								<p:commandButton id="plantOverlay" value=".."/>
								<p:overlayPanel id="plantPanel" for="plantOverlay" hideEffect="fade" dynamic="true" style="width:600px" modal="true" appendTo="@(body)" showCloseIcon="true">
								<p:dataTable resizableColumns="true" id="tblPlant" var="p" value="#{orderbean.master}"
											paginator="true" paginatorPosition="bottom" rows="8"
											selectionMode="single" selection="#{orderbean.selectedMasterOverlay}"	rowKey="#{p.id}">
									<p:ajax event="rowSelect" listener="#{orderbean.onRowMasterSelect}" update="plantName"/>
									<p:column headerText="ชื่อ">
			                <h:outputText value="#{p.company}" />
			            </p:column>
			            <p:column headerText="ที่อยู่">
			                <h:outputText value="#{p.address}" />
			            </p:column>
			            <p:column headerText="Tel">
			                <h:outputText value="#{p.mobilePhone}" />
			            </p:column>
								</p:dataTable>
								</p:overlayPanel>
							</p:column>
							<p:column>
								<p:commandButton con="ui-icon-plus" value="เพิ่ม Plant"
								actionListener="#{orderbean.btnNewPlantClick()}"
								oncomplete="PF('newPlantDlg').show()" process="@this"
								update=":mainCenterForm" resetValues="true" />
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<h:outputText value="Customer name :" />
							</p:column>
							<p:column>
								<p:inputText id="customerName" readonly="true" value="#{orderbean.selectCustomerOverlay.company}"/>
								<p:commandButton id="customerOverlay" value=".."/>
								<p:overlayPanel id="customerPanel" for="customerOverlay" hideEffect="fade" dynamic="true" style="width:600px" modal="true" appendTo="@(body)" showCloseIcon="true">
									<p:dataTable resizableColumns="true" id="tblcustomer" var="p" value="#{orderbean.customers}"
												paginator="true" paginatorPosition="bottom" rows="8"
												selectionMode="single" selection="#{orderbean.selectCustomerOverlay}"	rowKey="#{p.id}">
										<p:ajax event="rowSelect" listener="#{orderbean.onRowCustomerSelect}" update="customerName"/>
										<p:column headerText="ชื่อ">
				                <h:outputText value="#{p.company}" />
				            </p:column>
				            <p:column headerText="ที่อยู่">
				                <h:outputText value="#{p.address}" />
				            </p:column>
				            <p:column headerText="Tel">
				                <h:outputText value="#{p.mobilePhone}" />
				            </p:column>
									</p:dataTable>
								</p:overlayPanel>
							</p:column>
							<p:column>
								<p:commandButton con="ui-icon-plus" value="เพิ่ม Customer"
								actionListener="#{orderbean.btnNewCustomerClick()}"
								oncomplete="PF('newCustomerDlg').show()" process="@this"
								update=":mainCenterForm" resetValues="true" />
							</p:column>
						</p:row>
						
						<p:row>
							<p:column>
								<h:outputText value="Project name :" />
							</p:column>
							<p:column>
								<p:inputText id="ProjectName" readonly="true" value="#{orderbean.selectProjectOverlay.projectName}"/>
								<p:commandButton id="projectOverlay" value=".."/>
								<p:overlayPanel id="projectPanel" for="projectOverlay" hideEffect="fade" dynamic="true" style="width:600px" modal="true" appendTo="@(body)" showCloseIcon="true">
									<p:dataTable resizableColumns="true" id="tblproject" var="p" value="#{orderbean.projects}"
												paginator="true" paginatorPosition="bottom" rows="8"
												selectionMode="single" selection="#{orderbean.selectProjectOverlay}"	rowKey="#{p.id}">
										<p:ajax event="rowSelect" listener="#{orderbean.onRowProjectSelect}" update="ProjectName"/>
										<p:column headerText="ชื่อ Project">
				                <h:outputText value="#{p.projectName}" />
				            </p:column>
									</p:dataTable>
								</p:overlayPanel>
							</p:column>
							<p:column>
								<p:commandButton con="ui-icon-plus" value="เพิ่ม Project"
								actionListener="#{orderbean.btnNewProjectClick()}"
								oncomplete="PF('newProjectDlg').show()" process="@this"
								update=":mainCenterForm" resetValues="true" />
							</p:column>
						</p:row>
						
					</p:panelGrid>
				</p:column>
			</p:row>
		</p:panelGrid>
		
	</p:panel>
	<ui:include src="plantDialog.xhtml" />
  <ui:include src="customerDialog.xhtml" />
  <ui:include src="projectDialog.xhtml" />
  
	<p:confirmDialog message="คุณต้องการ ลบ ใช่หรือไม่ ?" closable="flase" header="ลบ" severity="alert" widgetVar="confirmDeleteMasterDialog" appendTo="@(body)">  
		  <p:commandButton value="ใช่" update="panelInput" onclick="PF('confirmDeleteMasterDialog').hide()" actionListener = "#{orderbean.confirmDeletePlantClick()}" process="@this" ajax="true" icon="ui-icon-check"/>  
		  <p:commandButton value="ไม่ใช่" onclick=" PF('confirmDeleteMasterDialog').hide()" type="button"  icon="ui-icon-closethick"/>   
	  </p:confirmDialog>
	  
	 <p:confirmDialog message="คุณต้องการ ลบ ใช่หรือไม่ ?" closable="flase" header="ลบ" severity="alert" widgetVar="confirmDeleteProjectDialog" appendTo="@(body)">  
		  <p:commandButton value="ใช่" update="panelCustomerInput" onclick="PF('confirmDeleteProjectDialog').hide()" actionListener="#{orderbean.confirmDeleteCustomClick}" process="@this" ajax="true" icon="ui-icon-check"/>  
		  <p:commandButton value="ไม่ใช่" onclick="PF('confirmDeleteProjectDialog').hide()" type="button"  icon="ui-icon-closethick"/>   
	  </p:confirmDialog>
	  
	  <p:confirmDialog message="คุณต้องการ ลบ ใช่หรือไม่ ?" closable="flase" header="ลบ" severity="alert" widgetVar="confirmDeleteProjectDialog" appendTo="@(body)">  
		  <p:commandButton value="ใช่" update="panelCustomerInput" onclick="PF('confirmDeleteProjectDialog').hide()" actionListener="#{orderbean.confirmDeleteProjectClick}" process="@this" ajax="true" icon="ui-icon-check"/>  
		  <p:commandButton value="ไม่ใช่" onclick="PF('confirmDeleteProjectDialog').hide()" type="button"  icon="ui-icon-closethick"/>   
	  </p:confirmDialog>
  
  
	</ui:composition>
</html>

<!-- 
<p:dialog id="editPlantDlg" header="เพิ่ม Plant" widgetVar="editPlantDlg"  modal="true" appendTo="@(body)" width="700px" height="700px" closable="true">
			<p:panelGrid id="editPlantPanel">
				<p:row>
					<p:column>
						<p:dataTable resizableColumns="true" var="r" value="#{orderbean.master}"
								paginator="true" paginatorPosition="bottom" rows="8"
								selectionMode="single" selection="#{orderbean.selectedMasterTable}"	rowKey="#{r.id}">
								<p:column headerText="ชื่อ">
		                <h:outputText value="#{r.company}" />
		            </p:column>
		            <p:column headerText="ที่อยู่">
			                <h:outputText value="#{r.address}" />
			            </p:column>
			            <p:column headerText="เบอร์มือถือ">
			                <h:outputText value="#{r.mobilePhone}" />
			            </p:column>
			            <p:column headerText="">
			                <p:commandButton value="แก้ไข" />
			            </p:column>
			            <p:column headerText="">
			            <p:commandButton value="ลบ"
									actionListener="#{orderbean.btnDeletePlantClick(r)}"
									oncomplete="PF('confirmDeleteCarDialog').show()" process="@this"
									update="panelInput" resetValues="true"/>
			            </p:column>
						</p:dataTable>
					</p:column>
				</p:row>
			</p:panelGrid>
		</p:dialog>




<p:dialog id="newPlantDlg" header="เพิ่ม Plant" widgetVar="newPlantDlg"  modal="true" appendTo="@(body)" width="700px" height="700px" closable="true">
		<p:panelGrid id="panelInput">
			<p:row>
				<p:column>
					<h:outputText for="firstName" value="ชื่อ : " />
				</p:column>
				<p:column>
					<p:inputText id="firstName" value="#{plantbean.selectedRow.firstName}" required="true" requiredMessage="กรุณา กรอกรชื่อผู้ใช้งาน"/>
				</p:column>
				<p:column>
					<h:outputText for="lastName" value="นามสกุล : " />
				</p:column>
				<p:column>
					<p:inputText id="lastName" value="#{plantbean.selectedRow.lastName}" required="true" requiredMessage="กรุณา กรอกนามสกุล"/>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText for="mobilePhone" value="เบอร์โทรมือถือ : " />
				</p:column>
				<p:column>
					<p:inputText id="mobilePhone" value="#{plantbean.selectedRow.mobilePhone}"/>
				</p:column>
				<p:column>
					<h:outputText for="businessPhone" value="เบอร์โทรที่ทำงาน : " />
				</p:column>
				<p:column>
					<p:inputText id="businessPhone" value="#{plantbean.selectedRow.businessPhone}"/>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText for="homePhone" value="เบอร์โทรบ้าน: " />
				</p:column>
				<p:column>
					<p:inputText id="homePhone" value="#{plantbean.selectedRow.homePhone}"/>
				</p:column>
				<p:column>
					<h:outputText for="faxPhone" value="แฟกช์ : " />
				</p:column>
				<p:column>
					<p:inputText id="faxPhone" value="#{plantbean.selectedRow.faxNumber}"/>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText for="company" value="ชื่อ บริษัท: " />
				</p:column>
				<p:column>
					<p:inputText id="company" value="#{plantbean.selectedRow.company}"/>
				</p:column>
				<p:column>
					<h:outputText for="webpage" value="website: " />
				</p:column>
				<p:column>
					<p:inputText id="webpage" value="#{plantbean.selectedRow.webPage}"/>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText for="email" value="email: " />
				</p:column>
				<p:column>
					<p:inputText id="email" value="#{plantbean.selectedRow.emailAddress}"/>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText for="Address" value="ที่อยู่ : " />
				</p:column>
				<p:column>
					<p:inputTextarea id="Address" value="#{plantbean.selectedRow.address}" required="true" requiredMessage="กรุณา กรอกที่อยู่"/>
				</p:column>
			</p:row>
			<p:row>
				<p:column>
					<h:outputText for="attachments" value="Comment: " />
				</p:column>
				<p:column>
					<p:inputTextarea id="attachments" value="#{plantbean.selectedRow.notes}"/>
				</p:column>
			</p:row>
			<p:row>
				<p:column colspan="2" style="text-align: center">
					<p:commandButton value="บันทึก" icon="ui-icon-disk" actionListener="#{plantbean.btnSaveClick}" update=":mainCenterForm" process="@this panelInput" oncomplete="if (args.validationFailed) {PF('newplantDlg').show(); } else {PF('newplantDlg').hide(); }"/>
					<p:commandButton value="ยกเลิก" icon="ui-icon-close" onclick="PF('newplantDlg').hide()"/>
				</p:column>
			</p:row>
			
			
		</p:panelGrid>
	</p:dialog>
 -->